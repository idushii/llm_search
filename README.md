# Mind Search

Интеллектуальная система поиска и обработки информации с использованием языковых моделей.

## Описание

"Mind Search" представляет собой интеллектуальную систему поиска и обработки информации, разработанную для глубокого и всестороннего анализа заданных тем. Система выполняет многоуровневый поиск по запросу пользователя, обрабатывает найденную информацию и генерирует структурированный, содержательный ответ на основе наиболее релевантных источников.

## Особенности

- **Планирование запросов:** Генерация подзапросов для всестороннего исследования темы
- **Умный поиск:** Создание поисковых запросов на русском и английском языках
- **Скрапинг с преобразованием в Markdown:** Получение содержимого веб-страниц в формате Markdown через сервис r.jina.ai
- **Интеллектуальное ранжирование:** Оценка релевантности результатов поиска с использованием языковой модели
- **Саммаризация:** Создание сжатых и информативных саммари документов
- **Оценка саммари:** Ранжирование саммари с использованием языковой модели
- **Генерация ответа:** Создание структурированного ответа в формате Markdown
- **Кэширование:** Хранение всех промежуточных результатов для повторного использования

## Архитектура системы

Система построена по модульному принципу и включает следующие основные компоненты:

### 1. Модули обработки данных

- **Core (Ядро)** - базовые компоненты и утилиты:
  - `config.py` - конфигурация и переменные окружения
  - `constants.py` - константы проекта
  - `utils.py` - вспомогательные функции (хеширование, форматирование, логирование)

- **Search (Поиск)** - компоненты, ответственные за поиск информации:
  - `planned_topics.py` - планирование подзапросов на основе исходного запроса
  - `planned_searching.py` - генерация поисковых запросов для каждого подзапроса
  - `scraping.py` - выполнение поисковых запросов и скрапинг веб-страниц с преобразованием в Markdown

- **Processing (Обработка)** - компоненты для обработки найденной информации:
  - `ranking_search_result.py` - ранжирование результатов поиска с использованием LLM
  - `summarizer.py` - создание сжатых саммари документов
  - `ranking_summary.py` - ранжирование саммари по релевантности с использованием LLM
  - `nlp_utils.py` - генерация итогового структурированного ответа

- **Storage (Хранение)** - управление данными и кэширование:
  - `cache_manager.py` - управление кэшированием данных
  - `file_system.py` - работа с файловой системой проекта

### 2. Структура каталогов

```
/project/
    /src/
        /core/        - базовые компоненты
        /search/      - модули поиска
        /processing/  - модули обработки
        /storage/     - модули управления данными
    /cache/           - кэш данных
        /docs/        - кэшированные документы
        /summaries/   - кэшированные саммари
        /search_queries/  - кэшированные поисковые запросы
        /search_results/  - кэшированные результаты поиска
        /ranked_results/  - кэшированные ранжированные результаты
        /ranked_summaries/ - кэшированные ранжированные саммари
    main.py           - точка входа в приложение
    requirements.txt  - зависимости
    .env.example      - шаблон переменных окружения
    .gitignore        - исключения для Git
    README.md         - документация
```

## Технические особенности

### Использование языковой модели (LLM)

- **Ранжирование результатов поиска:** Оценка по 5 критериям (соответствие запросу, соответствие направлению, полнота, точность, структура)
- **Ранжирование саммари:** Оценка по 5 критериям (соответствие запросу, полнота, точность, информативность, структура)
- **Генерация структурированного ответа:** Создание подробного ответа на основе лучших саммари

### Скрапинг с использованием r.jina.ai

- **Преобразование в Markdown:** Страницы сразу скачиваются в готовом Markdown-формате
- **Резервный механизм:** При ошибке выполняется обычный скрапинг с преобразованием в Markdown
- **Кэширование:** Все скачанные документы сохраняются в кэше для повторного использования

### Ограничение нагрузки (Rate Limiting)

- **SearchXNG:** до 10 запросов в минуту
- **r.jina.ai:** до 5 запросов в секунду
- **AITUNNEL:** до 2 запросов в секунду

## Установка и настройка

### Требования

- Python 3.8+
- Зависимости из requirements.txt
- API-ключи для AITUNNEL и SearchXNG

### Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/your-username/mind-search.git
cd mind-search
```

2. Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
# Для Windows
venv\Scripts\activate
# Для Linux/Mac
source venv/bin/activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл .env на основе .env.example и заполните его вашими API-ключами:
```bash
cp .env.example .env
# Отредактируйте файл .env, добавив ваши API-ключи
```

### Запуск

```bash
python main.py
```

## Использование

1. Введите запрос в консоли
2. Просмотрите и при необходимости отредактируйте сгенерированные подзапросы
3. Дождитесь завершения поиска и обработки результатов
4. Получите структурированный ответ в формате Markdown

